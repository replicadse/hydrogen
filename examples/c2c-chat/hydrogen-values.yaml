apps:
  gateway:
    enabled: true
    service:
      type: ClusterIP
      port: 8080
    deployment:
      revisions: 0
      strategy:
        type: Recreate
      image:
        ref: "harbor.chinook.k8s.voidpointergroup.com/hydrogen/hydrogen-gateway:nightly"
        pull_policy: IfNotPresent
    hpa:
      min: 1
      max: 1
      cpu_percentage: 50
    secrets:
      config:
        config: |-
          version: 0.1.0

          server:
            address: "0.0.0.0:8080"
            heartbeat_interval_sec: 10
            connection_timeout_sec: 31
            stats_interval_sec: 10
            max_out_message_size: 262144 # 256kb

          nats:
            endpoint: "nats://hydrogen-nats:4222"
            stream: client
          redis:
            endpoint: "redis://hydrogen-redis-master:6379"

          routes: {}
  mproc:
    enabled: true
    deployment:
      revisions: 0
      strategy:
        type: Recreate
      image:
        ref: "harbor.chinook.k8s.voidpointergroup.com/hydrogen/hydrogen-mproc:nightly"
        pull_policy: IfNotPresent
    hpa:
      min: 1
      max: 1
      cpu_percentage: 50
    secrets:
      config:
        config: |-
          version: 0.1.0

          queue:
            nats:
              endpoint: "nats://hydrogen-nats:4222"
              stream: client

          engine_mode:
            regex:
              rules:
                - regex: "^!send"
                  route:
                    endpoint: "http://fn-message.openfaas-fn.svc.cluster.local:8080"
                    headers: {}

  support:
    dummysetup:
      enabled: false

redis:
  enabled: true
  architecture: standalone
  auth:
    enabled: false
  master:
    persistence:
      enabled: true
      storageClass: ""
      accessModes:
        - ReadWriteOnce
      size: 2Gi
      existingClaim: ""

nats:
  enabled: true
  nats:
    jetstream:
      enabled: true
      memStorage:
        enabled: true
        size: 1Gi
      fileStorage:
        enabled: true
        size: 4Gi
  cluster:
    enabled: false
    replicas: 3
